<html>
<head>
    <meta charset="utf-8">
  
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
    <title>我的问卷</title>

<link rel="stylesheet" href="../css/lib/mui.min.css" type="text/css">
		


    <style type="text/css">

         [v-cloak]{ display: none; }
        
    </style>
   

</head>
<body>
    
    <div class="mui-content">
			<ul class="mui-table-view">
				<li class="mui-table-view-cell" style="background-color: #FDF6F6;">
					问卷档案编号:<span id="qbh"></span>

				</li>
			</ul>


			<div class="mui-card" style="margin-top:25px;">
				<form class="mui-input-group" name="frmone">
				 <ul class="mui-table-view">
				 <li class="mui-table-view-cell">
					
						<span style="color:#007AFF;font-weight:blod;">1,性别</span> 
				</li>
                </ul>
                <hr style="margin-top:1px;border:1px dotted #036"/>
					<div class="mui-input-row mui-radio mui-left">
						<label>男</label>
						<input name="sex" type="radio" value="1">
					</div>
                    <div class="mui-input-row mui-radio mui-left">
						<label>女</label>
						<input name="sex" type="radio" value="2">
					</div>

                 <ul class="mui-table-view">
				<li class="mui-table-view-cell">
               <span style="color:#007AFF;font-weight:blod;">2,年龄(岁)</span> 
					
				</li>
                </ul>
                <hr style="margin-top:3px;border:1px dotted #036"/>
					<div class="mui-numbox" data-numbox-min='1' data-numbox-max='100' style="margin-left:12px;margin-top:3px;width: 150px;height: 40px;">
					<button class="mui-btn-numbox-minus" type="button">-</button>
					<input id="age" class="mui-input-numbox" type="number" value="50"/>
					<button class="mui-btn-numbox-plus" type="button">+</button>
				</div>
				
				
				
                <ul class="mui-table-view">
				<li class="mui-table-view-cell">
					
						<span style="color:#007AFF;font-weight:blod;">3,婚姻状况</span> 
					
				</li>
                </ul>
                <hr style="margin-top:1px;border:1px dotted #036"/>
   
					<div class="mui-input-row mui-radio mui-left">
						<label>未婚</label>
						<input name="marstats" type="radio" value="1">
					</div>
                    <div class="mui-input-row mui-radio mui-left">
						<label>已婚</label>
						<input name="marstats" type="radio" value="2">
					</div>
                    <div class="mui-input-row mui-radio mui-left">
						<label>离异</label>
						<input name="marstats" type="radio" value="3">
					</div>
                    <div class="mui-input-row mui-radio mui-left">
						<label>丧偶</label>
						<input name="marstats" type="radio" value="4">
					</div>
                     <div class="mui-input-row mui-radio mui-left">
						<label>其他</label>
						<input name="marstats" type="radio" value="5">
					</div>


                <ul class="mui-table-view">
				<li class="mui-table-view-cell">
					
						<span style="color:#007AFF;font-weight:blod;">4,文化程度 </span> 
					
				</li>
                </ul>
                <hr style="margin-top:1px;border:1px dotted #036"/>
   
					<div class="mui-input-row mui-radio mui-left">
						<label>小学</label>
						<input name="edustats" type="radio" value="1">
					</div>
                    <div class="mui-input-row mui-radio mui-left">
						<label>初中</label>
						<input name="edustats" type="radio" value="2">
					</div>
                    <div class="mui-input-row mui-radio mui-left">
						<label>高中与中专</label>
						<input name="edustats" type="radio" value="3">
					</div>
                    <div class="mui-input-row mui-radio mui-left">
						<label>大专</label>
						<input name="edustats" type="radio" value="4">
					</div>
                     <div class="mui-input-row mui-radio mui-left">
						<label>本科及以上</label>
						<input name="edustats" type="radio" value="5">
					</div>


                <ul class="mui-table-view">
				<li class="mui-table-view-cell">
					
				<span style="color:#007AFF;font-weight:blod;">5,职业 </span> 
					
				</li>
                </ul>
                <hr style="margin-top:1px;border:1px dotted #036"/>
   
					<div class="mui-input-row mui-radio mui-left">
						<label>机关干部</label>
						<input name="job" type="radio" value="1">
					</div>
                    <div class="mui-input-row mui-radio mui-left">
						<label>医药卫生</label>
						<input name="job" type="radio" value="2">
					</div>
                    <div class="mui-input-row mui-radio mui-left">
						<label>教师</label>
						<input name="job" type="radio" value="3">
					</div>
                    <div class="mui-input-row mui-radio mui-left">
						<label>科技人员</label>
						<input name="job" type="radio" value="4">
					</div>
                     <div class="mui-input-row mui-radio mui-left">
						<label>金融</label>
						<input name="job" type="radio" value="5">
					</div>
                    <div class="mui-input-row mui-radio mui-left">
						<label>公司职员</label>
						<input name="job" type="radio" value="6">
					</div>
                    <div class="mui-input-row mui-radio mui-left">
						<label>工人</label>
						<input name="job" type="radio" value="7">
					</div>
                    <div class="mui-input-row mui-radio mui-left">
						<label>农民</label>
						<input name="job" type="radio" value="8">
					</div>
                     <div class="mui-input-row mui-radio mui-left">
						<label>学生</label>
						<input name="job" type="radio" value="9">
					</div>
                     <div class="mui-input-row mui-radio mui-left">
						<label>离退休</label>
						<input name="job" type="radio" value="10">
					</div>
                   <div class="mui-input-row mui-radio mui-left">
						<label>家务</label>
						<input name="job" type="radio" value="11">
					</div>
                    <div class="mui-input-row mui-radio mui-left">
						<label>其他</label>
						<input name="job" type="radio" value="12">
					</div>
					
				
				<ul class="mui-table-view">
				<li class="mui-table-view-cell">
					
				<span style="color:#007AFF;font-weight:blod;">6,目前主要健康诉求 </span> 
					
				</li>
                </ul>
                <hr style="margin-top:1px;border:1px dotted #036"/>
   
				<div class="mui-input-row" >
					<textarea id="keydesc" rows="5" placeholder="请输入"></textarea>
				</div>
                    
					
				</form>		
					
				
			</div>

            <div class="mui-content-padded">
				<ul class="mui-pager">
					<li class="mui-previous">
						
							<button type="button" id="saveOne" class="mui-btn mui-btn-danger">保存<span class="mui-badge mui-badge-danger">以后再来</span></button>
						
					</li>
					<li class="mui-next">

							<button type="button" id="saveOneGo" class="mui-btn mui-btn-primary">保存 <span class="mui-badge mui-badge-primary">继续答题</span></button>

					</li>
				</ul>
			</div>

  </div>

</body>
<script src="../js/base.js" type="text/javascript"></script>
<script src="../js/lib/jquery-2.1.3.min.js" type="text/javascript"></script>
<script src="../js/public.js" type="text/javascript"></script>
<script src="../js/lib/mui.min.js" type="text/javascript"></script>

<script type="text/javascript">
 
    
var domainUrl = GetMvcApiDomain();

var username=null;  
var questionBh = null;
function plusReady() { 
	
HeadShow();
back();

var _self = plus.webview.currentWebview();
username=_self.UserName;
if(username==null || username=='' || username==undefined){
	var objuser=JSON.parse(plus.storage.getItem('user'));
	username = objuser.UserName;
}



questionBh = username + addNumber(6);
$("#qbh").append(questionBh);


}

if(window.plus){  
plusReady();  
}else{  
document.addEventListener("plusready",plusReady,false);  
} 
        

        function addNumber(_idx) {
            var str = '';
            for (var i = 0; i < _idx; i += 1) {
                str += Math.floor(Math.random() * 10);
            }
            return str;
        }


            

            $("#saveOne").click(function () {
            	
                var msg1 = "您的问卷基本情况成功保存!";
                var url1 = "BasicInfoTestList.html";

                questionOne(msg1, url1, username, questionBh,'0');
                
            })

            $("#saveOneGo").click(function () {
                var msg2 = "您的问卷基本情况成功保存，将继续答题!";
                var url2 = "BasicInfoTest2.html";
                questionOne(msg2, url2, username, questionBh,'1');
            })





  function questionOne(msg,tourl,uname,questionBh,send){

            var xnum=questionBh;
            var sex = $('input:radio[name=sex]:checked').val();
            if(sex==null){
               mui.toast('请选择性别', '健康问卷', function() {
				});
                return false;
            }
            
            

            var age = document.getElementById("age").value;
            if(age==null){
               mui.toast('请选择年龄', '健康问卷', function() {
				});
                return false;
            }

            var marstats = $('input:radio[name=marstats]:checked').val();
            if(marstats==null){
               mui.toast('请选择婚烟状况', '健康问卷', function() {
				});
                return false;
            }
            var edustats = $('input:radio[name=edustats]:checked').val();
            if(edustats==null){
               mui.toast('请选择文化程度', '健康问卷', function() {
				});
                return false;
            }
            var job = $('input:radio[name=job]:checked').val();
            if(job==null){
               mui.toast('请选择职业', '健康问卷', function() {
				});
                return false;
            }
            
            var keydesc = document.getElementById("keydesc").value;;
            if(keydesc==null || keydesc=='请输入'|| keydesc==''){
               mui.toast('请输入健康诉求', '健康问卷', function() {
				});
                return false;
            }


            var jsonData = {
            "TestNum":xnum,
            "UserName":username,
            "Sex":sex,
            "Age":age,
            "MarStats":marstats,
            "EduStats":edustats,
            "JobType":job,
            "KeyDesc":keydesc
           }
            
            
             $.ajax({
             	url: domainUrl + "api/TestBasicInfo/PostPartBasicAddToJson",
                type: 'post',
                dataType: "json",
                data:jsonData,
                success: function (data) {
                	
                mui.toast(msg);
                if(send=='0'){
                	clearview();
                }
                else{
                var parm = {"questionBh" : xnum}
                clickedParm(tourl,tourl,'slide-in-right',parm,'目前健康状况'); 
                }
                        
 
                },
                error: function () {
                mui.toast("网络错误，请稍后再试");
                 }
            })


 
  
  } 
  
  
  
  function clearview(){
	    plus.webview.currentWebview().close();
}
  

</script>


</html>
